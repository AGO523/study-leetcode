# Implement pow(x, n), which calculates x raised to the power n (i.e., xn).

# pow(x, n) ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„ã€‚ã“ã®é–¢æ•°ã¯ã€x ã‚’ n ä¹—ã—ãŸå€¤ï¼ˆã¤ã¾ã‚Š 
# ğ‘¥
# ğ‘›
# x 
# n
#  ï¼‰ã‚’è¨ˆç®—ã—ã¾ã™ã€‚

# Example 1:

# Input: x = 2.00000, n = 10
# Output: 1024.00000
# Example 2:

# Input: x = 2.10000, n = 3
# Output: 9.26100
# Example 3:

# Input: x = 2.00000, n = -2
# Output: 0.25000
# Explanation: 2-2 = 1/22 = 1/4 = 0.25
 

# Constraints:

# -100.0 < x < 100.0
# -231 <= n <= 231-1
# n is an integer.
# Either x is not zero or n > 0.
# -104 <= xn <= 104

# ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã¨è§£èª¬
# ã“ã®å•é¡Œã§ã¯ã€åŠ¹ç‡çš„ã« 
# ğ‘¥
# ğ‘›
# x 
# n
#   ã‚’è¨ˆç®—ã™ã‚‹ã“ã¨ãŒæ±‚ã‚ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚ç‰¹ã« 
# ğ‘›
# n ãŒå¤§ããªæ•´æ•°ã§ã‚ã‚‹å ´åˆã‚„è² ã®æ•´æ•°ã§ã‚ã‚‹å ´åˆã‚‚æ­£ã—ãå‡¦ç†ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

# ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ
# è² ã®æŒ‡æ•°ã¸ã®å¯¾å¿œ:

# ğ‘¥
# âˆ’
# ğ‘›
# =
# 1
# ğ‘¥
# ğ‘›
# x 
# âˆ’n
#  = 
# x 
# n
 
# 1
# â€‹
#   ã§ã‚ã‚‹ãŸã‚ã€n ãŒè² ã®å ´åˆã€x ã‚’ 
# 1
# /
# ğ‘¥
# 1/x ã«å¤‰æ›´ã—ã€n ã‚’æ­£ã«ã—ã¾ã™ã€‚
# é«˜é€Ÿç´¯ä¹—æ³•ï¼ˆExponentiation by Squaringï¼‰:

# è¨ˆç®—å›æ•°ã‚’æ¸›ã‚‰ã™ãŸã‚ã«ã€æ¬¡ã®ãƒ«ãƒ¼ãƒ«ã‚’åˆ©ç”¨ã—ã¾ã™ï¼š
# ğ‘›
# n ãŒå¶æ•°ã®å ´åˆï¼š 
# ğ‘¥
# ğ‘›
# =
# (
# ğ‘¥
# ğ‘›
# /
# 2
# )
# â‹…
# (
# ğ‘¥
# ğ‘›
# /
# 2
# )
# x 
# n
#  =(x 
# n/2
#  )â‹…(x 
# n/2
#  )
# ğ‘›
# n ãŒå¥‡æ•°ã®å ´åˆï¼š 
# ğ‘¥
# ğ‘›
# =
# ğ‘¥
# â‹…
# ğ‘¥
# ğ‘›
# âˆ’
# 1
# x 
# n
#  =xâ‹…x 
# nâˆ’1
 
# å†å¸°ã¾ãŸã¯ãƒ«ãƒ¼ãƒ—ã‚’åˆ©ç”¨:

# å†å¸°çš„ã¾ãŸã¯ãƒ«ãƒ¼ãƒ—ã§è¨ˆç®—ã‚’è¡Œã„ã€åŠ¹ç‡çš„ã«å€¤ã‚’æ±‚ã‚ã¾ã™ã€‚

def my_pow(x, n)
  # è² ã®æŒ‡æ•°ã¸ã®å¯¾å¿œ
  if n < 0
    x = 1.0 / x
    n = -n
    p x
    p n
  end

  result = 1.0
  current_power = x

  while n > 0
    if n % 2 == 1
      result *= current_power
      puts "å¥‡æ•°æŒ‡æ•°ã«ã‚ˆã‚Š result æ›´æ–°: #{result}"
    end
    current_power *= current_power
    puts "ç¾åœ¨ã® current_power: #{current_power}"
    n /= 2
    puts "æŒ‡æ•° n ã‚’åŠåˆ†ã«: #{n}"
  end

  result
end

# ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹1
puts "ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹1: x = 2.00000, n = 10"
puts "çµæœ: #{my_pow(2.00000, 10)}"  # æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›: 1024.00000

# ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹2
puts "\nãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹2: x = 2.10000, n = 3"
puts "çµæœ: #{my_pow(2.10000, 3)}"  # æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›: 9.26100

# ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹3
puts "\nãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹3: x = 2.00000, n = -2"
puts "çµæœ: #{my_pow(2.00000, -2)}"  # æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›: 0.25000


# n /= 2 ã¯ã€é«˜é€Ÿç´¯ä¹—æ³•ã§æŒ‡æ•°ã‚’åŠåˆ†ã«ã—ã¦è¨ˆç®—é‡ã‚’æ¸›ã‚‰ã™ãŸã‚ã®é‡è¦ãªã‚¹ãƒ†ãƒƒãƒ—
